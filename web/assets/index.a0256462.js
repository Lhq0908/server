import{o as e,c as t,r as s,a,b as i,d as o,C as n,p as l,e as r,f as d,g as c,w as u,h as p,i as h,E as m,j as f,k as g,V as y}from"./vendor.8e4b4d0e.js";const _={};let k;_.render=function(a,i){const o=s("router-view");return e(),t(o)};const S={},v=function(e,t){if(!t)return e();if(void 0===k){const e=document.createElement("link").relList;k=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in S)return;S[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":k,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))};const E=[{path:"",redirect:"/index"},{path:"/index",meta:{name:"首页"},component:()=>v((()=>import("./index.d2a28d14.js")),["/assets/index.d2a28d14.js","/assets/index.435e5119.css","/assets/vendor.8e4b4d0e.js"])},...[{path:"/feedback",meta:{name:"学习建议"},component:()=>v((()=>import("./index.2bd2e44f.js")),["/assets/index.2bd2e44f.js","/assets/index.4b1f50a8.css","/assets/vendor.8e4b4d0e.js"])},{path:"/test",meta:{name:"地图"},component:()=>v((()=>import("./index.aad5585e.js")),["/assets/index.aad5585e.js","/assets/vendor.8e4b4d0e.js"])}],{path:"/:pathMatch(.*)*",meta:{name:"404"},component:()=>v((()=>import("./error.8e301d2a.js")),void 0)}],b=a({history:i(),routes:E});var w=o({state:{token:{accessToken:null,refreshToken:null}},getters:{token:e=>e.token},mutations:{updateToken(e,t){e.token={accessToken:t.accessToken,refreshToken:t.refreshToken}},clearToken(e){e.token={accessToken:"",refreshToken:""}}},actions:{mpLogin:(e,t)=>new Promise(((s,a)=>{const i=t.config.globalProperties.$axios,o=t.config.globalProperties.$config,n=t.config.globalProperties.$session,l=n.getSession("accessToken"),r=n.getSession("refreshToken");if(l&&r&&e.commit("updateToken",{accessToken:l,refreshToken:r}),e.getters.token.accessToken)s();else{let t={code:sessionStorage.getItem("wechat_code"),grantType:"wechat_mp",clientId:o.CLIENT_ID,clientSecret:o.CLIENT_SECRET,scope:"all"};i.post("oauth2/token",t).then((t=>{n.setSession("accessToken",t.result.accessToken),n.setSession("refreshToken",t.result.refreshToken),e.commit("updateToken",t.result),s()})).catch((e=>{s()}))}}))},modules:{}});let T={DEBUG:!1,BASE_API:"/",STATIC_PATH:"https://c2b-res.oss-cn-shenzhen.aliyuncs.com/",SYSTEM_NAME:"法卡山党员干部培训教育学院",MODULES:8,CLIENT_ID:"client",CLIENT_SECRET:"hXSU3KZ9A7nfvFB0uVRcItsOorTqz2EG",REFRESH_TOKEN:"oauth2/token",SESSION_SECRET:"U2FsdGVkX18/DAktXYvKqX4YKCGIR92NIP07PJ4q0tE=",SUCCESS_CODE:200,FAIL_CODE:300,PAGE_SIZE:10};const x={props:{title:{type:String,default:"页面标题"},shadow:{type:Boolean,default:!0},background:{type:String,default:"white"},padding:{type:Number,default:20},apiList:{type:String,default:""},apiDel:{type:String,default:""}},data(){return{conditon:{},list:{records:[],current:1,total:0},path:{add:this.$route.path.replace(/\/(.+)\/(.+)\/(.+)/,"/$1/$2/add"),edit:this.$route.path.replace(/\/(.+)\/(.+)\/(.+)/,"/$1/$2/edit"),del:""}}},mounted(){this.$store.commit("updateUiTitle",this.title),this.$slots.default||this.init()},methods:{async init(){let e=await this.loadList().catch((e=>{this.list.current=1,this.list.records=[]}));e&&(this.list=e.result)},loadList(){return this.$axios.get(this.apiList).catch((e=>{this.list.records=[]}))},search(){},page(){},del(e){this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$axios.delete(this.apiDel,{id:e}).then((e=>{this.$message.success(e.message),this.init()})).catch((e=>{this.$message.error(e)}))}))}}},$=u("data-v-aa2c729c");l("data-v-aa2c729c");const C={class:"list-tools d-flex justify-content-between"},I={class:"action"},P=h("新增"),A={class:"search"},L={class:"d-flex"},D=h("搜索"),V={class:"list-main"},j=h("编辑"),O=h("删除"),q={class:"list-footer d-flex justify-content-center"};r();const N=$(((a,i,o,n,l,r)=>{const u=s("el-button"),h=s("router-link"),m=s("el-input"),f=s("el-table-column"),g=s("el-table"),y=s("el-pagination");return e(),t("div",{class:["d1-page-list",{shadow:o.shadow}],style:{"background-color":o.background,padding:o.padding+"px"}},[d("div",C,[d("div",I,[c(a.$slots,"action",{},(()=>[d(h,{to:{path:l.path.add}},{default:$((()=>[d(u,{type:"primary"},{default:$((()=>[P])),_:1})])),_:1},8,["to"])]),{})]),d("div",A,[c(a.$slots,"search",{},(()=>[d("div",L,[d(m,{modelValue:l.conditon.search,"onUpdate:modelValue":i[1]||(i[1]=e=>l.conditon.search=e),"prefix-icon":"el-icon-search",clearable:!0,placeholder:"请输入查询条件"},null,8,["modelValue"]),d(u,{style:{"margin-left":"10px"},onClick:r.search},{default:$((()=>[D])),_:1},8,["onClick"])])]),{})])]),d("div",V,[c(a.$slots,"default",{},(()=>[d("div",null,[d(g,{data:l.list.records,border:"",style:{width:"100%"}},{default:$((()=>[c(a.$slots,"column",{},void 0,!0),d(f,{label:"操作",width:"150"},{default:$((e=>[d(h,{class:"mr-2",to:{path:l.path.edit,query:{id:e.row.id}}},{default:$((()=>[d(u,{size:"mini",type:"warning"},{default:$((()=>[j])),_:1})])),_:2},1032,["to"]),d(u,{size:"mini",type:"danger",onClick:t=>r.del(e.row.id)},{default:$((()=>[O])),_:2},1032,["onClick"])])),_:1})])),_:3},8,["data"])])]),{})]),d("div",q,[c(a.$slots,"page",{},(()=>[l.list.total>0?(e(),t(y,{key:0,"current-page":l.list.current,total:l.list.total,onCurrentChange:r.page,layout:"total, prev, pager, next, jumper"},null,8,["current-page","total","onCurrentChange"])):p("",!0)]),{})])],6)}));x.render=N,x.__scopeId="data-v-aa2c729c";const R={props:{title:{type:String,default:"页面标题"},shadow:{type:Boolean,default:!0},background:{type:String,default:"white"},padding:{type:Number,default:20},entity:{type:Object,default:{}},rules:{type:Object,default:{}},apiAdd:{type:String,default:""},apiEdit:{type:String,default:""},apiDetail:{type:String,default:""},beforeAction:{type:Function,default:null}},data:()=>({}),mounted(){this.$store.commit("updateUiTitle",this.title),this.init()},methods:{back(){this.$router.go(-1)},async init(){if(!this.$slots.default&&this.entity.id){this.beforeAction&&await this.beforeAction();let e=await this.loadDetail().catch((e=>{}));e&&this.$emit("update:entity",e.result)}},loadDetail(){return this.$axios.get(this.apiDetail,{id:this.$route.query.id})},submit(){this.$refs.form.validate((e=>{e&&(null!=this.entity.id?this.$axios.put(this.apiEdit,this.entity).then((e=>{this.$message({message:e.message,type:"success",duration:1e3,onClose:()=>{this.$router.back()}})})).catch((e=>{this.$message.error(e)})):this.$axios.post(this.apiAdd,this.entity).then((e=>{this.$message({message:e.message,type:"success",duration:1e3,onClose:()=>{this.$router.back()}})})).catch((e=>{this.$message.error(e)})))}))}}},U=u("data-v-f746406a");l("data-v-f746406a");const z={class:"form-main"},M=h("保存");r();const B=U(((a,i,o,n,l,r)=>{const u=s("el-button"),p=s("el-form-item"),h=s("el-form");return e(),t("div",{class:["d1-page-form",{shadow:o.shadow}],style:{"background-color":o.background,padding:o.padding+"px"}},[d("div",z,[c(a.$slots,"default",{},(()=>[d(h,{ref:"form",model:o.entity,rules:o.rules,"label-width":"150px"},{default:U((()=>[c(a.$slots,"field",{},void 0,!0),d(p,null,{default:U((()=>[d(u,{type:"primary",onClick:r.submit},{default:U((()=>[M])),_:1},8,["onClick"])])),_:1})])),_:3},8,["model","rules"])]),{})])],6)}));R.render=B,R.__scopeId="data-v-f746406a";const F={props:{width:{type:Number,default:146},height:{type:Number,default:146}},data:()=>({dialog:!1,query:{name:""}})},G=u("data-v-ba1405a4");l("data-v-ba1405a4");const Y={class:"d1-upload d-flex"},K={class:"file-list"},X={class:"file-manager d-flex h-100"},H=d("div",{class:"file-nav"},[d("div",{class:"main-nav"},[d("div",{class:"title"},[d("i",{class:"el-icon-caret-bottom"}),h("全部文件")]),d("div",{class:"second"},[d("div",null,[d("i",{class:"el-icon-picture-outline"}),h(" 图片")]),d("div",null,[d("i",{class:"el-icon-video-camera"}),h(" 视频")]),d("div",null,[d("i",{class:"el-icon-document"}),h(" 文档")]),d("div",null,[d("i",{class:"el-icon-more-outline"}),h(" 其他")])])])],-1),Z={class:"manager-main flex-full d-flex flex-column justify-content-between align-items-stretch"},J={class:"action d-flex justify-content-between align-items-center"},W={class:"d-flex align-items-center"},Q=h("上传文件"),ee=h("新建文件夹"),te=h("删除选中"),se={class:"d-flex align-items-center"},ae=h("搜索"),ie=d("div",{class:"file-box flex-full"},[d("div",{class:"file-select-list h-100 d-flex justify-content-between align-items-stretch"},[d("div",{class:"left-list flex-full"}),d("div",{class:"right-detail"})])],-1);r();const oe=G(((a,i,o,n,l,r)=>{const c=s("el-button"),u=s("el-button-group"),p=s("el-input"),h=s("el-dialog");return e(),t("div",Y,[d("div",K,[d("div",{class:"up",style:{width:o.width+"px",height:o.height+"px"}},null,4)]),d(h,{modelValue:l.dialog,"onUpdate:modelValue":i[2]||(i[2]=e=>l.dialog=e),width:"1000px","close-on-click-modal":!1,"show-close":!1},{header:G((()=>[])),footer:G((()=>[])),default:G((()=>[d("div",X,[H,d("div",Z,[d("div",J,[d("div",W,[d(c,{type:"primary",size:"medium",icon:"el-icon-upload"},{default:G((()=>[Q])),_:1}),d(u,{style:{"margin-left":"10px"}},{default:G((()=>[d(c,{type:"warning",size:"medium",plain:"",icon:"el-icon-folder-add"},{default:G((()=>[ee])),_:1}),d(c,{type:"danger",size:"medium",plain:"",icon:"el-icon-delete"},{default:G((()=>[te])),_:1})])),_:1})]),d("div",se,[d(p,{modelValue:l.query.name,"onUpdate:modelValue":i[1]||(i[1]=e=>l.query.name=e),size:"medium",clearable:"","prefix-icon":"el-icon-search",placeholder:"请输入文件名称"},null,8,["modelValue"]),d(c,{size:"medium",style:{"margin-left":"10px"}},{default:G((()=>[ae])),_:1})])]),ie])])])),_:1},8,["modelValue"])])}));F.render=oe,F.__scopeId="data-v-ba1405a4";const ne={props:{width:{type:Number,default:700}},mounted(){v((()=>import("./ckeditor.f733f54d.js")),void 0).then((()=>{console.log("加载完毕"),ClassicEditor.create(document.querySelector("#editor"),{}).then((e=>{console.log(e)})).catch((e=>{console.error(e)}))}))}},le=d("textarea",{id:"editor"},null,-1);ne.render=function(s,a,i,o,n,l){return e(),t("div",{class:"d1-editor",style:{width:i.width+"px"}},[le],4)};const re={listPage:x,formPage:R,upload:F,editor:ne},de=function(e,t){de.installed||Object.keys(re).forEach((t=>{e.component("d1"+t.replace(/^\S/,(e=>e.toUpperCase())),re[t])}))};"undefined"!=typeof window&&window.Vue&&de(window.Vue);const ce=g(_);ce.config.globalProperties.$config=T,ce.config.globalProperties.$session=class{static setSession(e,t){if(void 0!==t&&""!=t&&null!=t){const s=n.AES.encrypt(t,T.SESSION_SECRET).toString();sessionStorage.setItem(e,s)}}static getSession(e){const t=sessionStorage.getItem(e);if(null!==t){return n.AES.decrypt(t,T.SESSION_SECRET).toString(n.enc.Utf8)}return null}static removeSession(e){sessionStorage.removeItem(e)}static clearSession(){sessionStorage.clear()}},ce.use(y),ce.use(de),ce.config.globalProperties.$axios=new class{constructor(){m.defaults.baseURL=T.BASE_API,m.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",m.defaults.headers.put["Content-Type"]="application/x-www-form-urlencoded",this.axios=m,this._interceptors()}get(e,t={},s={}){return new Promise(((a,i)=>{this._request(e,t,"get",a,i,s)}))}post(e,t={},s={}){return new Promise(((a,i)=>{this._request(e,t,"post",a,i,s)}))}put(e,t={},s={}){return new Promise(((a,i)=>{this._request(e,t,"put",a,i,s)}))}delete(e,t={},s={}){return new Promise(((a,i)=>{this._request(e,t,"delete",a,i,s)}))}upload(){}request(e,t={},s={}){return m.create({url:e,params:t})}_request(e,t,s,a,i,o={}){let n=null;switch(s){case"get":n=this.axios.get(e,{params:t});break;case"post":n=this.axios.post(e,f.stringify(t));break;case"put":n=this.axios.put(e,f.stringify(t));break;case"delete":n=this.axios.delete(e,{params:t})}n.then((e=>{const t=e.data;(null==o?void 0:o.fullResult)?a(t):t.code==T.SUCCESS_CODE?a({message:t.message,result:t.result}):i(t.message)}))}_interceptors(){this.axios.interceptors.request.use((e=>(w.getters.token.accessToken&&(e.headers.Authorization="bearer "+w.getters.token.accessToken),e)),(e=>Promise.reject(e))),this.axios.interceptors.response.use((e=>e),(e=>Promise.reject(e)))}},b.beforeEach(((e,t,s)=>{document.title=e.meta.name?e.meta.name+" | "+T.SYSTEM_NAME:T.SYSTEM_NAME,w.commit("updateUiTitle","");"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?w.dispatch("mpLogin",ce).then((()=>{s()})):(e.meta.login,s())})),ce.use(b),ce.use(w),ce.mount("#app");
